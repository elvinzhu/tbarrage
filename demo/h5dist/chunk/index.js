/*! For license information please see index.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"28":function(e,t){e.exports="data:image/png;base64,/9j/2wCEAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDIBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/AABEIACgAKAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/ALDjCEHBAdCCfr1rqPixqsmlaRG1u+yeeUICDzgDJ/p+dczegNBMcfOoViM9Oev+fSuj+K2mS3mkWM6gu0NyueOoZSP54pU2up211eSR4mLq983z3MjDOSzAkV6f4BuF1oQ2fkjfHKTIAONpAOf/AB01JZW8lzpyxNpqsA3lMMDI4Bzgmtv4daCdJ1fWCzFVdhswcYXPH8yPwpOqqiasXUpOkrpnocUToFyE+UYGB0FS4NY2s6pHptviGVPPYjb5j/KMnGTisT/hI9Q/5+tL/wC/rf8AxVS5WOaNNy1Rwt46/Y7g7gwEYI55HP8AKvTvFbWp8KXK3V7BbZiDxtMwX51+YY/Edq8I1fWJYrAqsh8yb5Mkfw/5/nXOyvdancJvuJZ5nwoMjlic+5raNPTVl1J80k0ej6HqheOe4MoLOcjrk9OBz7V0mma/bTok63SWx8ryplkQkhxI4Kk5wDjByexFcr4Rij0+Nvt9vMHHI2qGHH057+lYVzIJ9Z1KTy2t18wyqjcHkZ/wNYRiuZnTXbnBHfeK9TtJ55bm0KuiSJGdmOSG59R/DWD/AG3H/wA+LfmP8Ky9Hv7jVftNnHA0yq6zhhklAv8APritf7Lcf8+03/fBpu0dGZU4O2jPNNVuvMuUQNlYhj8T1qz4fIOqQM/RDu/IcVlXf/H1N/v1p6D/AMfyfQ12TXuGENZnosNzF54bofLOMd+VrhtavWl1u+cfL8yrgHrgYrqYf9bF/uN/Na4rVP8AkL3v/XWuWglzM6az0Op+GurLZeJTExwtwhj+rdR/WvZPtjf3K8B8G/8AI1WX/Xwte70q8VzXMYPQ/9k="},"29":function(e,t,n){},"9":function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1),i=n(68),a=n(70),s=n(69),c=n(67);function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(o,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,o,i,a={"label":0,"sent":function sent(){if(1&o[0])throw o[1];return o[1]},"trys":[],"ops":[]};return i={"next":verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{"value":i[1],"done":!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{"value":i[0]?i[1]:void 0,"done":!0}}([i,s])}}}var u=function(){function Barrage(e,t,n){void 0===n&&(n={}),this.queue=[],this.runnings=[],this.stoped=!1,this.options=function mergeOptions(e){var t=Object(c.a)(),n=e.canvasHeight||150;return{"canvasHeight":n,"canvasWidth":e.canvasWidth||t.windowWidth,"height":e.height||22,"imgWidth":e.imgWidth||15,"maxRow":e.maxRow||3,"minGap":e.minGap||30,"rowGap":e.rowGap||20,"imgTextGap":e.imgTextGap||6,"bgColor":null===e.bgColor?null:e.bgColor||"rgba(0,0,0,0.4)","dpr":e.dpr||t.pixelRatio,"color":e.color||"white","font":e.font||"12px arial","firstRowTop":e.firstRowTop||22,"minSpeed":e.minSpeed||1,"maxSpeed":e.maxSpeed||40,"appearMaxGap":e.appearMaxGap||n,"mode":e.mode||"loop"}}(n),this.selector=e,t&&this.push(t)}return Barrage.prototype.getCanvas=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return this.canvas?[3,2]:[4,(n=this.selector,new Promise((function(e){e(document.querySelector(n+" canvas"))})))];case 1:if(!(e=t.sent())||!e.getContext)throw new Error("未找到canvas，请确保selector传递正确，且canvas正确配置了type属性");this.canvas=e,t.label=2;case 2:return[2,this.canvas]}var n}))}))},Barrage.prototype.push=function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t.resolve(e)})):this.resolve(e)},Barrage.prototype.resolve=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r,o,i;return __generator(this,(function(a){switch(a.label){case 0:return t=this.options,n=t.color,r=t.font,o={"txt":e.txt,"left":0,"top":0,"speed":0,"width":0,"color":e.color||n,"font":e.font||r},[4,this.getCanvas()];case 1:return a.sent(),e.img?[4,(s=e.img,new Promise((function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=function(){t()},n.src=s}))).catch((function(){}))]:[3,3];case 2:i=a.sent(),o.img=i,a.label=3;case 3:return this.queue.push(o),[2]}var s}))}))},Barrage.prototype.run=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,r,o,i,a,s,c,u,l,p,f,h,d,g,w,y,v,A,m,b,I,x,B,C=this;return __generator(this,(function(M){switch(M.label){case 0:return this.stoped=!1,e=this.options,t=e.height,n=e.canvasHeight,r=e.canvasWidth,o=e.imgWidth,i=e.dpr,a=e.maxRow,s=e.firstRowTop,c=this.options,u=c.minGap,l=c.rowGap,p=c.imgTextGap,f=c.appearMaxGap,h=c.minSpeed,d=c.maxSpeed,g=c.mode,[4,this.getCanvas()];case 1:return w=M.sent(),y=w.getContext("2d"),v=this.runnings,w.width=r*i,w.height=n*i,y.imageSmoothingEnabled=!0,y.textBaseline="middle",y.scale(i,i),A=function addItem(e,n){v[n].length?e.speed=v[n][0].speed:e.speed=Math.max(Math.floor(Math.random()*d)/100)+h,e.left=r+f*Math.random(),e.top=n*(l+t)+s,e.width||(y.font=e.font,e.width=y.measureText(e.txt).width,e.img&&(e.width+=o+p)),v[n].push(e)},(B=function run(){if(!C.stoped){for(y.clearRect(0,0,r,n),v.length<a&&C.queue.length&&v.push([]),m=0;m<v.length;m++){b=v[m],I=b[0],C.queue.length&&(x=b[b.length-1],(b.length<1||x.left+x.width+u<r)&&A(C.queue.shift(),m)),I&&"loop"===g&&I.left+I.width<0&&(C.queue.push(I),b.shift());for(var e=0;e<b.length;e++)b[e].left-=b[e].speed,C.drawItem(y,b[e])}C.rafId=window.requestAnimationFrame(B)}})(),[2]}}))}))},Barrage.prototype.drawItem=function(e,t){var n=this.options,r=n.height,o=n.imgWidth,i=n.bgColor,a=n.imgTextGap,s=t.left,c=t.top,u=t.color,l=t.font,p=s;if(c+=r/2,i&&(e.lineWidth=r,e.lineCap="round",e.beginPath(),e.moveTo(s,c),e.lineTo(s+t.width,c),e.strokeStyle=i,e.stroke()),t.img){var f=o/2,h=s-r/4;p=h+o+a,e.save(),e.beginPath(),e.arc(h+f,c,f,0,2*Math.PI),e.clip(),e.drawImage(t.img,h,c-f,o,o),e.restore()}e.fillStyle=u,e.font=l,e.fillText(t.txt,p,c)},Barrage.prototype.toggleRun=function(){this.stoped?this.run():this.stop()},Barrage.prototype.stop=function(){this.stoped=!0,this.canvas&&window.cancelAnimationFrame(this.rafId)},Barrage}(),l=n(28),p=n.n(l);n(29);n.d(t,"default",(function(){return h}));var f=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function Index(){_classCallCheck(this,Index);var e=_possibleConstructorReturn(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return e.config={"navigationBarTitleText":"首页"},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,e),f(Index,[{"key":"componentDidMount","value":function componentDidMount(){this.barrage=new u("#canvas",[{"img":p.a,"txt":"迪丽热巴刚刚领取了法拉利5元优惠券","color":"red"},{"txt":"刘亦菲刚刚领取了兰博基尼5元优惠券"},{"txt":"刘亦菲刚刚领取了兰博基尼5元优惠券"},{"img":p.a,"txt":"刘亦菲刚刚领取了兰博基尼5元优惠券"},{"txt":"刘亦菲刚刚领取了兰博基尼5元优惠券","color":"red"},{"img":p.a,"txt":"刘亦菲刚刚领取了兰博基尼5元优惠券"},{"txt":"刘亦菲刚刚领取了兰博基尼5元优惠券"}]),this.barrage.run()}},{"key":"componentDidShow","value":function componentDidShow(){this.barrage&&this.barrage.run()}},{"key":"componentDidHide","value":function componentDidHide(){this.barrage.stop()}},{"key":"render","value":function render(){var e=this;return r.j.createElement(i.a,{"className":"index"},r.j.createElement(a.a,{"id":"canvas","canvasId":"canvas","type":"2d","ref":function ref(t){e.__taroref_canvas=t}}),r.j.createElement(s.a,{"onClick":function onClick(){return e.barrage.toggleRun()}},"Pause"))}}]),Index}(o.a.Component)}}]);